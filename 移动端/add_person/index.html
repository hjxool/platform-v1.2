<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="https://unpkg.com/vant@2.12/lib/index.css">
  <link rel="stylesheet" href="../../module/common_style.css">
  <link rel="stylesheet" href="./index.css">
</head>

<body>
  <div id="index" class="col_layout" v-cloak v-my_loading="loading">
    <div class="search_box row_layout">
      <!-- 搜索 -->
      <div class="search">
        <van-search class="box" v-model="search" @search="search" placeholder="搜索"
          background="transparent"></van-search>
        <div class="button1" @click="search">搜索</div>
      </div>
      <!-- 条件筛选 -->
      <van-dropdown-menu class="type">
        <van-dropdown-item v-model="type" :options="types"></van-dropdown-item>
      </van-dropdown-menu>
    </div>
    <!-- 架构检索路径 -->
    <div v-if="type" class="path_box flex_shrink">
      <div class="text2" v-for="path,index in stru_path">
        <span @click="path_back(path,index)" class="text">{{path.name}}</span>
        <span v-show="index!=stru_path.length-1">></span>
      </div>
    </div>
    <!-- 列表 -->
    <div class="scroll_box flex_grow">
      <!-- 人员形式 -->
      <template v-if="!type">
        <div class="row row_layout" v-for="person,index in list2" @click="select_person(person)">
          <!-- 勾选 -->
          <img v-show="!person.check" src="./img/icon2.png" class="icon">
          <img v-show="person.check" src="./img/icon3.png" class="icon">
          <!-- 名 -->
          <span class="name">{{person.name}}</span>
        </div>
      </template>
      <!-- 组织形式 -->
      <template v-if="type">
        <!-- 组织列表 -->
        <div class="row row_layout" v-for="de,index in list1" @click="select_person(de)">
          <!-- 勾选 -->
          <img v-show="!de.check" src="./img/icon2.png" class="icon">
          <img v-show="de.check" src="./img/icon3.png" class="icon">
          <!-- 名 -->
          <span class="name">{{de.name}}</span>
          <!-- 下级按钮 -->
          <div :class="['button1',de.check?'disable':'able']" @click.stop="get_data(de)">下级
          </div>
        </div>
        <!-- 分割线 -->
        <div v-if="list2.length && list1.length" class="line_between"></div>
        <!-- 人员列表 -->
        <div class="row row_layout" v-for="person,index in list2" @click="select_person(person)">
          <!-- 勾选 -->
          <img v-show="!person.check" src="./img/icon2.png" class="icon">
          <img v-show="person.check" src="./img/icon3.png" class="icon">
          <!-- 名 -->
          <span class="name">{{person.name}}</span>
        </div>
      </template>
    </div>
    <!-- 分页 -->
    <van-pagination class="flex_shrink" @change="get_data" v-model="page_num" :total-items="total_person"
      :show-page-size="3" force-ellipses>
      <template #prev-text>
        <van-icon name="arrow-left"></van-icon>
      </template>
      <template #next-text>
        <van-icon name="arrow"></van-icon>
      </template>
    </van-pagination>
    <!-- 已选 -->
    <div class="foot row_layout flex_shrink">
      <span class="text">已选择({{select_list.length}}/1000)</span>
      <div class="button1">确定</div>
    </div>
  </div>

  <!-- <script src="../../../运维人员部署请修改我.js"></script> -->
  <script src="../../module/vue.js"></script>
  <script src="https://unpkg.com/vant@2.12/lib/vant.min.js"></script>
  <script src="../../module/axios.min.js"></script>
  <script src="../../module/common_function.js"></script>
  <script src="./index.js"></script>
</body>

</html>